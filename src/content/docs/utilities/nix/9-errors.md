---
title: 9. Nix/NixOS でよくあるミス・引っかかりやすいところ
---

### Flake がファイルを見つけない

Flake は Git に追跡されるファイルのみをソースとして取り込みます。新規ファイルは `git add` してから評価してください。

理由: Flake は純粋性のためにワーキングツリーのうち追跡対象のみを Nix Store にコピーして評価します。

### NixOS で一部の Node/NPM ツールが動かない

配布バイナリをダウンロードして実行するツールは、NixOS のリンカ/ライブラリと合わず動かない場合があります。

対策:
- 可能なら Nixpkgs 版を使う。
- `nix-ld` を導入して実行時リンカを補助する。
- それでも不可なら各ツールの推奨手順に従って環境変数でバイナリを指定する (例: Prisma)。

### Flake で fetcher がエラーになる

Flake は純粋性のためネットワーク取得にハッシュを要求します。

回避:
- 外部ソースは `inputs` に定義して参照する (推奨)。
- fetcher を使う場合は `sha256` などの固定ハッシュを明示する。
